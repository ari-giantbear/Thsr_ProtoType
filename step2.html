<!DOCTYPE html>
<html lang="zh-TW">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>é«˜éµè¯ç¥¨ - é¸æ“‡è»Šæ¬¡</title>
    <link rel="stylesheet" href="styles.css?v=1.2.7">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="Dialog.js"></script>

    
<style>
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .navigation a {
            color: #007bff;
            cursor: pointer;
        }

        .summary {
            max-width: 600px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .summary,
        .container .ticket-detail {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
            color: #666;
        }

        .notice {
            padding-left: 20px;
            padding-right: 20px;
            background: #f9f9f9;
        }

        .notice-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
    </style>

    <script>
        let departureIndex = 0;
        let returnIndex = 0;

        //å»ç¨‹æ‰€é¸æ“‡çš„è»Šæ¬¡åƒæ•¸
        let outwardDate = '';
        let outwardTrainNo = '';
        let outwardDeptTime = '';
        let outwardDeptStation = '';
        let outwardDuration = '';
        let outwardDestTime = '';
        let outwardDestStation = '';

        //å›ç¨‹æ‰€é¸æ“‡çš„è»Šæ¬¡åƒæ•¸  
        let returnDate = '';
        let returnTrainNo = '';
        let returnDeptTime = '';
        let returnDeptStation = '';
        let returnDuration = '';
        let returnDestTime = '';
        let returnDestStation = '';

        //æ‰€æœ‰è»Šæ¬¡è³‡æ–™ï¼Œé€™æ˜¯éš¨æ©Ÿç”¢ç”Ÿçš„
        const trains = Array.from({ length: 20 }, (_, i) => ({
            startTime: `${12 + Math.floor(i / 2)}:${(30 + i * 3) % 60}`,
            endTime: `${13 + Math.floor(i / 2)}:${(33 + i * 3) % 60}`,
            time: `${12 + Math.floor(i / 2)}:${(30 + i * 3) % 60} â†’ ${13 + Math.floor(i / 2)}:${(33 + i * 3) % 60}`,
            duration: `â± 1:${(i % 3) + 1}`,
            trainNo: `ğŸš† ${600 + i}`
        }));

        //æ¸²æŸ“è»Šæ¬¡
        function renderTrains(type, index) {
            const container = document.querySelector(`.${type} .train-list`);
            container.innerHTML = '';
            trains.slice(index, index + 5).forEach(train => {
                const div = document.createElement('div');
                div.className = 'train-option';
                div.onclick = () => selectTrain(div, type, train);
                div.innerHTML = `<div class='ticket-time'>${train.time} </div> <div class='duration'>${train.duration}</div><div class='train-no'>${train.trainNo}</div>`;
                container.appendChild(div);
            });
        }

        //æ›´æ›è»Šæ¬¡
        function changeTrains(type, direction) {
            if (type === 'departure') {
                departureIndex = Math.max(0, Math.min(15, departureIndex + direction * 5));
                renderTrains(type, departureIndex);
            } else {
                returnIndex = Math.max(0, Math.min(15, returnIndex + direction * 5));
                renderTrains(type, returnIndex);
            }
        }

        //é¸æ“‡è»Šæ¬¡
        function selectTrain(element, type, train) {
            document.querySelectorAll(`.${type} .train-option`).forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            if (type === 'departure') {
                outwardDeptTime = train.startTime;
                outwardDestTime = train.endTime;
                outwardDuration = train.duration;
                outwardTrainNo = train.trainNo;
            } else {
                returnDeptTime = train.startTime;
                returnDestTime = train.endTime;
                returnDuration = train.duration;
                returnTrainNo = train.trainNo;
            }
            updateSummary();
        }

        //æ›´æ–°è¨‚ä½æ˜ç´°(è»Šç¥¨çš„å…§å®¹)
        function updateSummary() {
            document.getElementById("outward-train-no").textContent = outwardTrainNo;
            document.getElementById("outward-dept-time").textContent = outwardDeptTime;
            document.getElementById("outward-dest-time").textContent = outwardDestTime;
            document.getElementById("outward-duration").textContent = outwardDuration;
            document.getElementById("return-train-no").textContent = returnTrainNo;
            document.getElementById("return-dept-time").textContent = returnDeptTime;
            document.getElementById("return-dest-time").textContent = returnDestTime;
            document.getElementById("return-duration").textContent = returnDuration;
        }

        function gotoStep3() {
            // æª¢æŸ¥å»ç¨‹æ˜¯å¦å·²é¸æ“‡
            if (!outwardTrainNo) {
                showDialog({
                    caption: 'è»Šæ¬¡é¸æ“‡ä¸å®Œæ•´',
                    message: 'è«‹é¸æ“‡å»ç¨‹è»Šæ¬¡',
                    /* å¯ä»¥ä¸éœ€è¦è¨­å®šæŒ‰éˆ•,æ¡ç”¨é è¨­çš„æŒ‰éˆ•å³å¯
                    buttons: [
                        {
                            text: 'ç¢ºå®š',
                            type: 'primary',
                            onClick: () => closeDialog()
                        }
                    ]
                    */
                });
                return;
            }

            // æª¢æŸ¥æ˜¯å¦ç‚ºå»å›ç¨‹
            const returnTicket = document.querySelector('.return');
            if (returnTicket && returnTicket.style.display !== 'none' && !returnTrainNo) {
                showDialog({
                    caption: 'è»Šæ¬¡é¸æ“‡ä¸å®Œæ•´',
                    message: 'è«‹é¸æ“‡å›ç¨‹è»Šæ¬¡',
                    buttons: [
                        {
                            text: 'ç¢ºå®š',
                            type: 'primary',
                            onClick: () => closeDialog()
                        }
                    ]
                });
                return;
            }

            // å¦‚æœé©—è­‰é€šéï¼Œé€²è¡Œè·³è½‰
            window.location.href = 'step3.html';
        }

        //è¼‰å…¥é é¢æ™‚ï¼Œæ¸²æŸ“è»Šæ¬¡
        window.onload = function () {
            renderTrains('departure', departureIndex);
            renderTrains('return', returnIndex);
        };
    </script>
</head>

<body>
    <div class="step-nav">
        <div class="step-list">
            <div class="step completed">
                <div class="step-number">1</div>
                <div class="step-text">æŸ¥è©¢è»Šæ¬¡</div>
            </div>
            <div class="step active">
                <div class="step-number">2</div>
                <div class="step-text">é¸æ“‡è»Šæ¬¡</div>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-text">å–ç¥¨è³‡è¨Š</div>
            </div>
            <div class="step">
                <div class="step-number">4</div>
                <div class="step-text">å®Œæˆè¨‚ä½</div>
            </div>
            <div class="step">
                <div class="step-number">5</div>
                <div class="step-text">ç¹³æ¬¾å®Œæˆ</div>
            </div>
        </div>
    </div>
    <div class="container departure">
        <div class="title">å»ç¨‹ï¼š(å°åŒ— â†’ å°ä¸­)</div>
        <div class="date">2025/03/20 (æ˜ŸæœŸå››)</div>
        <div class="train-list"></div>
        <div class="navigation">
            <a onclick="changeTrains('departure', -1)">â† æ›´æ—©è»Šæ¬¡</a>
            <a onclick="changeTrains('departure', 1)">æ›´æ™šè»Šæ¬¡ â†’</a>
        </div>
    </div>

    <div class="container return">
        <div class="title">å›ç¨‹ï¼š(å°ä¸­ â†’ å°åŒ—)</div>
        <div class="date">2025/03/31 (æ˜ŸæœŸæ—¥)</div>
        <div class="train-list"></div>
        <div class="navigation">
            <a onclick="changeTrains('return', -1)">â† æ›´æ—©è»Šæ¬¡</a>
            <a onclick="changeTrains('return', 1)">æ›´æ™šè»Šæ¬¡ â†’</a>
        </div>
    </div>

    <div class="container">
        <div class="title">è¨‚ä½æ˜ç´°</div>
        <div class="ticket-area">
            <div class="ticket">
                <div class="ticket-row">
                    <div class="left">
                        <div class="ticket-way">å»ç¨‹</div>
                        <div id="outward-date" class="ticket-date">03/20</div>
                    </div>
                    <div class="right">
                        <div id="outward-train-no" class="ticket-train-no">ğŸš† 621</div>
                    </div>
                </div>
                <div class="ticket-row">
                    <div class="left flex-column">
                        <div id="outward-dept-time" class="ticket-time">09:46</div>
                        <div id="outward-dept-station" class="station">å°åŒ—</div>
                    </div>
                    <div id="outward-duration" class="through">â±1:28</div>
                    <div class="right flex-column">
                        <div id="outward-dest-time" class="ticket-time">10:46</div>
                        <div id="outward-dest-station" class="station">å°ä¸­</div>
                    </div>
                </div>
            </div>

            <div class="ticket">
                <div class="ticket-row">
                    <div class="left">
                        <div class="ticket-way">å›ç¨‹</div>
                        <div id="return-date" class="ticket-date">03/20</div>
                    </div>
                    <div class="right">
                        <div id="return-train-no" class="ticket-train-no">ğŸš† 621</div>
                    </div>
                </div>
                <div class="ticket-row">
                    <div class="left flex-column">
                        <div id="return-dept-time" class="ticket-time">09:46</div>
                        <div id="return-dept-station" class="station">å°ä¸­</div>
                    </div>
                    <div id="return-duration" class="through">â±1:28</div>
                    <div class="right flex-column">
                        <div id="return-dest-time" class="ticket-time">10:46</div>
                        <div id="return-dest-station" class="station">å°åŒ—</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="ticket-detail">
            <span>è»Šå»‚ï¼š</span>
            <span>æ¨™æº–è»Šå»‚</span>
        </div>
        <div class="ticket-detail">
            <span>ç¥¨æ•¸ï¼š</span>
            <span>å…¨ç¥¨ 2 å¼µ</span>
        </div>

        <button onclick="gotoStep3()">ç¢ºèªè»Šæ¬¡</button>
    </div>

    <div class="container">
        <div class="notice">
            <div class="notice-title">æ³¨æ„äº‹é …</div>
            <ol>
                <li>æœ¬ç¶²é é¡¯ç¤ºå…§å®¹ç‚ºç›®å‰æ–¼è¨‚ä½ç³»çµ±æœå°‹åˆ°çš„å¯è¨‚è»Šæ¬¡åŠç¥¨åƒ¹ï¼Œå¯¦éš›è¨‚ä½çµæœä»ä»¥ã€Œå®Œæˆè¨‚ä½ã€é é¢ä¹‹å…§å®¹ç‚ºä¸»ã€‚</li>
                <li>åˆ—è»Šæ™‚åˆ»åŠå„ªæƒ è³‡è¨Šè‹¥æœ‰è®Šå‹•ï¼Œä»¥å„è»Šç«™ç¾å ´å…¬å‘Šç‚ºæº–ã€‚</li>
            </ol>
        </div>
    </div>

</body>
<script>updateSummary();</script>

</html>